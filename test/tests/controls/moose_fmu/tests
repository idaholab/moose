[Tests]
  issues = '#30912'
  design = 'syntax/Controls/index.md source/controls/MOOSE_FMU.md'

  [control]
    requirement = 'The system shall support'
    [create_fmu]
      type = RunApp
      command_proxy = 'pythonfmu build -f MooseTest.py'
      required_python_packages = 'pythonfmu'
      recover = false
      restep = false
      detail = 'creating a MOOSE FMU from the Moose2FMU base class.'
      valgrind = 'none' # http library is not completely valgrind clean
      platform = 'linux'
    []
    [run_fmu]
      type = 'CSVDiff'
      csvdiff = 'run_fmu_step_by_step.csv'
      command_proxy = 'run_fmu.py'
      required_python_packages = 'fmpy pandas numpy'
      recover = false
      restep = false
      prereq = 'control/create_fmu'
      detail = 'running the created MOOSE FMU and verifying its outputs.'
      valgrind = 'none' # http library is not completely valgrind clean
      platform = 'linux'
    []
    [couple_fmus]
      type = 'CSVDiff'
      csvdiff = 'run_fmu_connection.csv'
      command_proxy = 'run_fmu_connection.py'
      required_python_packages = 'fmpy pandas matplotlib'
      recover = false
      restep = false
      prereq = 'control/create_fmu'
      depend_files = 'test/tests/controls/moose_fmu/Dahlquist.fmu'
      detail = 'coupling the MOOSE FMU with other open-source FMUs.'
      valgrind = 'none' # http library is not completely valgrind clean
      platform = 'linux'
    []
  []
[]
