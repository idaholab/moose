[Tests]
  issues = '#30655'

  [lower_bound]
    design = 'KokkosLowerBoundNodalKernel.md'
    requirement = 'The Kokkos system shall be able to enforce a lower bound on a variable using nodal NCP, nodal application of resultant forces,'
    [exo]
      input = kokkos_lower_bound.i
      type = Exodiff
      exodiff = kokkos_lower_bound_out.e
      detail = 'have no oscillations in the solution, and'
      capabilities = 'kokkos'
      compute_devices = 'cpu cuda'
    []
    [non_singular]
      input = kokkos_lower_bound.i
      type = RunApp
      absent_out = '[1-9]+[0-9]* of 22 singular values'
      expect_out = '0 of 22 singular values'
      cli_args = "nx=10 num_steps=5 Outputs/exodus=false Outputs/active='' -pc_type svd -pc_svd_monitor"
      detail = 'have a non-singular matrix'
      capabilities = 'kokkos'
      compute_devices = 'cpu cuda'
    []
  []
  [upper_bound]
    design = 'KokkosUpperBoundNodalKernel.md'
    requirement = 'The Kokkos system shall be able to enforce an upper bound on a variable using nodal NCP, nodal application of resultant forces,'
    [exo]
      input = kokkos_upper_bound.i
      type = Exodiff
      exodiff = kokkos_upper_bound_out.e
      detail = 'have no oscillations in the solution, and'
      capabilities = 'kokkos'
      compute_devices = 'cpu cuda'
    []
    [non_singular]
      input = kokkos_upper_bound.i
      type = RunApp
      absent_out = '[1-9]+[0-9]* of 22 singular values'
      expect_out = '0 of 22 singular values'
      cli_args = "nx=10 num_steps=5 Outputs/exodus=false Outputs/active='' -pc_type svd -pc_svd_monitor"
      detail = 'have a non-singular matrix'
      capabilities = 'kokkos'
      compute_devices = 'cpu cuda'
    []
  []
  [upper_and_lower_bound]
    design = 'KokkosLowerBoundNodalKernel.md KokkosUpperBoundNodalKernel.md'
    requirement = 'The Kokkos system shall be able to enforce an upper and lower bound on a variable using nodal NCP, nodal application of resultant forces,'
    [exo]
      input = kokkos_upper_and_lower_bound.i
      type = Exodiff
      exodiff = kokkos_upper_and_lower_bound_out.e
      detail = 'have no oscillations in the solution, and'
      cli_args = "Postprocessors/active='active_upper_lm upper_violations active_lower_lm lower_violations'"
      capabilities = 'kokkos'
      compute_devices = 'cpu cuda'
    []
    [non_singular]
      input = kokkos_upper_and_lower_bound.i
      type = RunApp
      absent_out = '[1-9]+[0-9]* of 33 singular values'
      expect_out = '0 of 33 singular values'
      cli_args = "nx=10 num_steps=5 Outputs/exodus=false Outputs/active='' -pc_type svd -pc_svd_monitor"
      detail = 'have a non-singular matrix, and'
      capabilities = 'kokkos'
      compute_devices = 'cpu cuda'
    []
    [amg_fail]
      input = kokkos_upper_and_lower_bound.i
      type = RunException
      expect_err = 'Linear solve did not converge due to DIVERGED_ITS'
      cli_args = "Outputs/exodus=false Outputs/active='' -pc_type hypre -pc_hypre_type boomeramg -ksp_converged_reason"
      detail = 'be incompataible with algebraic multigrid'
      capabilities = 'kokkos'
      compute_devices = 'cpu cuda'
    []
  []
[]
