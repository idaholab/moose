# XYMeshLineCutter

!syntax description /Mesh/XYMeshLineCutter

## Overview

The `XYMeshLineCutter` is used to trim off a fraction of the input mesh which is located on one side of a given straight line. The input mesh, which is given by [!param](/Mesh/XYMeshLineCutter/input), must be a 2D mesh in the XY-plane and only contain TRI3 and QUAD4 elements. The cutting straight line is provided by [!param](/Mesh/XYMeshLineCutter/cut_line_params), which is a vector of three `Real` type values, which are $a$, $b$, and $c$ in the line equation $ax+by+c=0$. This mesh generator remove the part of the mesh that matches $ax+by+c>0$. The trimmed mesh is processed to ensure a smooth cross-section instead of a "zigzag" cross-section as generated by [`PlaneDeletionGenerator`](/PlaneDeletionGenerator.md).

Two methods can be used by this mesh generator to achieve the mesh cutting: the "Element Cutting" (`CUT_ELEM_TRI`) method and the "Node Moving" (`MOV_NODE`) method, which can be selected through [!param](/Mesh/XYMeshLineCutter/cutting_type). The `MOV_NODE` method is the same method used by `HexagonMeshTrimmer` and `CartesianMeshTrimmer` in the `Reactor` module. That is, the nodes near the cutting line are moved to the cutting line to ensure the smoothness of the cross-section. On the other hand, the `CUT_ELEM_TRI` method first converts all the QUAD4 elements crossed by the cutting line into pairs of TRI3 elements. Then all the TRI3 elements crossed by the cutting line are further split into two or three TRI elements with a division matching the cutting line.

The two methods have their own Cons and Pros, respectively, and are complementary to each other. The `CUT_ELEM_TRI` method keeps all the subdomain interfaces and even preserves the volume of the subdomains. However, it may lead to some small elements near the cutting line. On the other hand, the `MOV_NODE` method does not produce too fine elements but may deform the subdomain interfaces, hence not preserving relative subdomain volumes. Therefore, if only one subdomain is involved in the cutting, or all the cut subdomain interfaces are symmetric over the cutting line, the `MOV_NODE` method is preferred. On the other hand, if complex subdomain interfaces are involved in the cutting, the `CUT_ELEM_TRI` method is preferred.

The id of the new external boundary produced by the trimming can be assigned using [!param](/Mesh/XYMeshLineCutter/new_boundary_id). As either method creates TRI3 elements if there are QUAD4 elements crossed by the cutting line, and as Exodus format does not allow TRI3 and QUAD4 elements sharing the same subdomain id and name. The newly formed TRI3 subdomains' ids and names can be customized using [!param](/Mesh/XYMeshLineCutter/tri_elem_subdomain_name_suffix) and [!param](/Mesh/XYMeshLineCutter/tri_elem_subdomain_shift).

## Example Syntax

The simple example of this mesh generator is to cut a square mesh that contains only one subdomain as shown in [simple_cut_original].

!media mesh_modifiers/simple_cut_before.png
      style=display: block;margin-left:auto;margin-right:auto;width:40%;
      id=simple_cut_original
      caption=The simple one-block mesh to be trimmed by this mesh generator.

The simple mesh shown above can be cut by `XYMeshLineCutter` with `CUT_ELEM_TRI` method using the following input block:

!listing test/tests/meshgenerators/xy_mesh_line_cutter/simple_cut.i block=Mesh/mlc

The mesh after the line cutting using `CUT_ELEM_TRI` method is shown in [simple_cut_elem]

!media mesh_modifiers/simple_cut_elem.png
      style=display: block;margin-left:auto;margin-right:auto;width:40%;
      id=simple_cut_elem
      caption=The simple one-block mesh cut using the `CUT_ELEM_TRI` method.

Alternatively, the simple mesh can also be cut with the `MOV_NODE` method and produce the following output shown in [simple_cut_node]

!media mesh_modifiers/simple_cut_node.png
      style=display: block;margin-left:auto;margin-right:auto;width:40%;
      id=simple_cut_node
      caption=The simple one-block mesh cut using the `MOV_NODE` method.

As both methods work well, the `CUT_ELEM_TRI` method does produce some fine elements near the cutting line. 

On the other hand, if a more complex mesh that contains multiple subdomains needs to be cut, as illustrated in [complex_cut_original].

!media mesh_modifiers/complex_cut_before.png
      style=display: block;margin-left:auto;margin-right:auto;width:40%;
      id=complex_cut_original
      caption=The complex multi-block mesh to be trimmed by this mesh generator.

The complex mesh shown above can be cut by `XYMeshLineCutter` with `CUT_ELEM_TRI` method using the following input block:

!listing test/tests/meshgenerators/xy_mesh_line_cutter/multi_block_cut.i block=Mesh/mlc

The mesh after the line cutting using `CUT_ELEM_TRI` method is shown in [complex_cut_elem]

!media mesh_modifiers/complex_cut_elem.png
      style=display: block;margin-left:auto;margin-right:auto;width:40%;
      id=complex_cut_elem
      caption=The complex multi-block mesh cut using the `CUT_ELEM_TRI` method.

The fine elements issue near the cutting line can be relieved by enabling [!param](/Mesh/XYMeshLineCutter/improve_tri_elements), as shown in [complex_cut_elem_improve].

!media mesh_modifiers/complex_cut_elem_improve.png
      style=display: block;margin-left:auto;margin-right:auto;width:40%;
      id=complex_cut_elem_improve
      caption=The complex multi-block mesh cut using the `CUT_ELEM_TRI` method.

Alternatively, the complex mesh can also be cut with the `MOV_NODE` method and produce the following output shown in [complex_cut_node]

!media mesh_modifiers/complex_cut_node.png
      style=display: block;margin-left:auto;margin-right:auto;width:40%;
      id=complex_cut_node
      caption=The complex multi-block mesh cut using the `MOV_NODE` method.

By comparing the output meshes produced using the two methods, it is clear that the `CUT_ELEM_TRI` method preserve the original shape better but creates fine TRI3 elements near the cutting line. On the other hand, the `MOV_NODE` method is free from the "fine elements" issue, but does skew the interface near the cutting line slightly if this interface is not symmetric near the cutting line. The skewing can be relieved by listing the interface boundary ids in [!param](/Mesh/XYMeshLineCutter/other_boundaries_to_conform), as shown in [complex_cut_node_extra]. In summary, users should make a wise selection on the method according to their specific applications.

!media mesh_modifiers/complex_cut_node_extra_bdry.png
      style=display: block;margin-left:auto;margin-right:auto;width:40%;
      id=complex_cut_node_extra
      caption=The complex multi-block mesh cut using the `MOV_NODE` method with all interfaces provided as `other_boundaries_to_conform`.

!syntax parameters /Mesh/XYMeshLineCutter

!syntax inputs /Mesh/XYMeshLineCutter

!syntax children /Mesh/XYMeshLineCutter
