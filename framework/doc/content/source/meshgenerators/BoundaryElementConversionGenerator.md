# BoundaryElementConversionGenerator

!syntax description /Mesh/BoundaryElementConversionGenerator

## Overview

The `BoundaryElementConversionGenerator` converts the elements of a linear mesh ([!param](/Mesh/BoundaryElementConversionGenerator/input)) that are involved in a set of given boundaries ([!param](/Mesh/BoundaryElementConversionGenerator/boundary_names)) in a mesh to ensure that the side elements on these boundaries are all `TRI3` (instead of `QUAD4`). This operation helps the boundaries of interest to be compatible with the 3D mesh generated by the tetrahedronization (e.g., [`XYZDelaunayGenerator`](XYZDelaunayGenerator.md)). The conversion strategy is described briefly in the following subsections.

## Conversion Strategy

!alert note
This mesh generator support all linear 3D elements except `C0POLYHEDRON`.

There are four types of linear 3D elements supported by this mesh generator: `HEX8`, `PRISM6`, `PYRAMID5`, and `TET4`. The `TET4` elements do not need to be converted since all of their sides are already TRI3. The conversion process focuses on the other element types. The basic idea is to convert the element side(s) that are part of the given boundaries while keeping the other element side(s) unchanged. Also, common mesh information, such as subdomain ids, element extra integers, and boundary ids, are preserved during the conversion.

!media framework/meshgenerators/boundary_transition.png
       style=display: block;margin-left:auto;margin-right:auto;width:35%;
       id=boundary_transition
       caption=Generation of the boundary layer based on the `left` boundary of cube mesh consisting different linear 3D elements: (left column) original mesh; (right column) mesh after the conversion.

The most common application of this mesh generator is applied to external boundaries of the [!param](/Mesh/BoundaryElementConversionGenerator/input) mesh. The mesh generator can also be applied to internal boundaries, in which case both sides of the internal boundary are converted. Users can enable [!param](/Mesh/BoundaryElementConversionGenerator/external_boundaries_checking) to enforce that the specified boundaries are external to avert unintended behavior.

!alert note
In distributed mesh mode, the mesh is temporarily serialized to enable some essential methods.

### HEX8

All the six sides of a `HEX8` elements are `QUAD4`. Any sides involved in the given boundaries will need to be divided into two `TRI3` sides that belong to two different new elements. To keep the other `QUAD4` sides unchanged, a simple strategy is adopted. First, the `HEX8` elements are divided into six `PYRAMID5` elements, each of which is defined by one of the `QUAD4` sides and the centroid of the `HEX8` element. For those `QUAD4` sides involved in the given boundaries, the `PYRAMID5` elements are further divided into two `TET4` elements (see the top row of [boundary_transition] as an example).

### PRISM6

A `PRISM6` element has three `QUAD4` sides and two `TRI3` sides. No conversion is needed if the given boundaries only involve the `TRI3` sides. If one or more `QUAD4` sides are involved, similar to the `HEX8` case, the element can be divided into two `TET4` elements and three `PYRAMID5` elements based on the sides and the centroid of the `PRISM6` element. The `PYRAMID5` elements are then divided into two `TET4` elements for those `QUAD4` sides involved in the given boundaries (see the middle row of [boundary_transition] as an example).

### PYRAMID5

A `PYRAMID5` element has only one `QUAD4` side. If that side is involved in the given boundaries, it is divided into two `TET4` elements straightforwardly (see the bottom row of [boundary_transition] as an example).

### Consistent Splitting of QUAD4 Faces

For each `QUAD4` face, there are two ways to split it into two `TRI3` faces, which correspond to the two diagonal lines of the `QUAD4` face. In this generator, the diagonal line that involves the node with the lowest global node ID among the four nodes of the `QUAD4` face is selected. This ensures that the splitting of the `QUAD4` faces is consistent across all elements in the mesh, which make the transition layer consistent with the element conversion process described in [`ElementsToTetrahedronsConverter`](ElementsToTetrahedronsConverter.md).

## Thicker Transition Layer Option

The transition layer generated by this mesh generator can optionally be made thicker than converting only one layer of original non-`TET4` elements. This can be achieved by setting the parameter ([!param](/Mesh/BoundaryElementConversionGenerator/conversion_element_layer_number)). For a thicker transition layer, only the layer of the original non-`TET4` elements that are adjacent to the remaining elements are converted as described above. Meanwhile, the outer layer(s) of the original non-`TET4` elements are converted to `TET4` elements using the same algorithm as described in [`ElementsToTetrahedronsConverter`](ElementsToTetrahedronsConverter.md).

## Subdomain Names and IDs

As new types of elements are introduced in the transition layer, only the subdomain ids and names of the input mesh that are associated with the retained elements are preserved in the output mesh. The new `TET4` and `PYRAMID5` elements in the transition layer are assigned new subdomain names that are based on the original subdomain names with a suffix defined by [!param](/Mesh/BoundaryElementConversionGenerator/converted_pyramid_element_subdomain_name_suffix) and [!param](/Mesh/BoundaryElementConversionGenerator/converted_tet_element_subdomain_name_suffix), respectively. The new subdomain ids are assigned by automatically shifting the original ids.

!syntax parameters /Mesh/BoundaryElementConversionGenerator

!syntax inputs /Mesh/BoundaryElementConversionGenerator

!syntax children /Mesh/BoundaryElementConversionGenerator
