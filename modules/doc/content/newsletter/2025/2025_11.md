# MOOSE Newsletter (November 2025)

## MOOSE Improvements

### Automatic Differentiation for Array Variables

Finite element array variables now support automatic differentiation. Some example residual objects
leveraging this new capability include [ADArrayDiffusion.md], [ADArrayReaction.md], [ADArrayDirichletBC.md] as well as the templated (on an `is_ad` boolean) nodal kernel class
[ArrayReactionNodalKernel.md]. Hand-coded Jacobian array nodal kernel support was introduced
in [2025_10.md].

### Mesh generation

The [PolyLineMeshFollowingNodeSetGenerator.md] has been added to generate a 1D line mesh, of `edge` elements, by averaging
the positions of nodes in a multi-dimensional nodeset. Several options and heuristics have been implemented to further define the averaging process.

The [XYZDelaunayGenerator.md] now has an option to only convert the boundary of a `hole` mesh to tetrahedrals, rather than the entire `hole` mesh.
A `hole` mesh is a mesh that is pre-existing and forming a hole inside the Delaunay tetrahedralization (and thus does not need to be tetrahedralized).

### KokkosFunction

The [KokkosFunction](syntax/KokkosFunctions/index.md) system was added to deliver the same capability as `Functions` but in Kokkos-based
finite element simulations. As a reminder, `Functions` are intended to be known functions of time and space exclusively, and not depend
on material properties or variable values.

### DiscreteVariableResidualNorm now uses the un-scaled residual norm

[DiscreteVariableResidualNorm.md] has added the parameter [!param](/Postprocessors/DiscreteVariableResidualNorm/include_scaling_factor), which allows the user to control whether the residual norm includes the scaling factor or not. Before, the scaling factor was always included, but now the default behavior is to not include the scaling factor. This is ideal for the most common use case of this object, which is convergence monitoring, which usually should be independent of the scaling factor.

## MOOSE Modules Changes

### Navier Stokes module

The Physics syntax for the weakly compressible Navier Stokes equations can now accept a `fp` parameter for the fluid properties
being used. This helps define the functor materials needed to compute fluid properties in the kernels forming the equations.

### Porous flow module

Two new `ActionComponents` were created to add injection and production wells in a compact syntax.
These wells are represented by multiple objects to represent the flow channel from the well, and the boundary condition
at the well.

### Heat transfer module

A linear finite volume implementation of the P1 radiation model was added, and can now be used for coupled convective flow problems alongside the linear finite volume implementation of Navier-Stokes.

### Subchannel module

A new [SCMClosure system](syntax/SCMClosures/index.md) was added to allow for user-developers to specify the closures to use
in the subchannel solve. For now, only the friction factors can be selected using this system. Developers may create new closures
for friction factors, using the dedicated SCMFrictionClosureBase base class.
Other base classes will be created for other closure-computed physical quantities in follow-on work.

Additional options were added for the computation of the heat transfer coefficient for the fuel pin and duct temperatures:

- the Dittus Boelter correlation (previously only option)
- the Kazimi-Carelli correlation
- the Gielinski correlation

### Reactor module

The [PinMeshGenerator.md] now supports the generation of a [CSGBase.md]. `CSG` objects are intended to provide a compatible path
from reactor-module meshes to CSG used in Monte Carlo codes.

## libMesh-level Changes

### `2025.11.14` Update

- A long-deprecated behavior has been removed: code initializing data
  using an `FE` object now *must* prerequest all data it will later
  access; it can no longer prerequest nothing and rely on libMesh to
  interpret that as a potential need for everything.
- A large number of long-deprecated APIs have been removed:
  - The `DofObject::set_unique_id()` overload that returns a reference
    is gone; use the overload that takes an argument instead.
  - `Elem::centroid()` is gone.  Code that requires an accurate
    approximation of ths should be using `Elem::true_centroid()`
    instead; code that requires a non-centroidal but
    quick-to-calculate internal point should be using
    `Elem::vertex_average()` instead.
  - `Elem::which_node_am_i()` is gone.  Use `Elem::local_side_node()`
    instead.
  - The `BoundaryInfo::build_*_list()` overloads that fill vector
    arguments are gone.  Use the overloads that return vectors
    instead, or use the `multimap` getters.
  - `CondensedEigenSystem` no longer supports direct access to raw
    `condensed_matrix_A` and `condensed_matrix_B` pointers; use e.g.
    `get_condensed_matrix_A()` instead.
  - The `MeshFunction::init()` overload taking a tree build type is
    gone.  Use the other `init()` overload instead.
  - The poorly named `EquationSystems::get_solution()` is gone.  Use
    `EquationSystems::build_elemental_solution_vector() for elemental
    data instead.
  - `System::read_legacy_data()` is gone.  Use libMesh .xda files that
    postdate 2007, and show your pre-2007 libMesh .xda files to Roy to
    amuse and delight him.
  - The old `libmesh/mesh_inserter_iterator.h` header is gone.  Rely
    on `Node` and `Elem` unpacking specializations to insert
    communicated objects into a target `UnstructuredMesh`.
  - The `libmesh_make_unique` macro is gone.  Use `std::make_unique`
    directly.
  - The old `libmesh/auto_ptr.h` header and macro is gone.  Use
    `std::unique_ptr`.
  - `Utility::iota()` and `Utility::is_sorted()` are gone.  Use
    `std::iota()` and `std::is_sorted()`
  - `DynaIO::clear_spline_nodes()` is gone.  Use
    `MeshTools::clear_spline_nodes()` instead.
  - `DifferentiableSystem::swap_physics()` is gone.  Use `push_physics()` and
    `pop_physics()` instead.
  - `DifferentiableSystem::init_qoi()` is gone.  Override
    `DifferentiableQoI::init_qoi_count()` in `DifferentiableQoI`
    subclasses instead.
  - `RBParameterized::get_parameter_names()` and an
    `RBEvaluation::eval_output_dual_norm()` overload have been
    removed.  Use `get_parameters_map()` or the remaining
    `eval_output_dual_norm()` overload.
  - Drop deprecated `MeshBase::insert_node()` API. Use `add_node()` instead
  - Drop deprecated `Parallel::Utils::is_sorted()`. Use `std::is_sorted()` instead
  - Drop deprecated qoi code. Unlikely to affect MOOSE user code
  - Drop deprecated InfFE code. Unlikely to affect MOOSE user code
  - Drop deprecated MeshRefinement accessor APIs. Use
    `MeshRefinement::enforce_mismatch_limit_prior_to_refinement()`
- libMesh now throws `DegenerateMap` exceptions when encountering
  singularities while evaluating geometric element mappings or
  factoring dense matrices, not `LogicError` exceptions, which are
  reserved for errors in logic.  Code catching these exceptions should
  use the new type, or for compatibility with old libMesh can catch
  `std::exception & e` and examine `e.what()` to determine the exception
  details.
- MetaPhysicL code can now run on accelerator/GPU devices, using Kokkos
- `VariationalSmoother` now supports meshes with tetrahedral elements.
- `VariationalSmoother` now supports fine-grained user-controlled
  verbosity, and emits better error messages in cases where a smoother
  optimization solve fails.
- Added `SparseMatrix::print_coreform_hdf5`, to create CSR-structured
  matrix data in HDF5 files in the Coreform format.
- `LaplaceMeshSmoother` now has API signatures to match
  `VariationalSmoother`.
- `Elem::size_vertex_average_normal()` now supports `Edge3` (and in
  theory `Edge4`) elements
- Added `ExodusII_IO::set_unique_ids_from_maps()` to set `unique_id()`
  rather than `id()` from Exodus file numbering.  This can be useful
  for efficiency when loading very sparse numberings into a
  `ReplicatedMesh`.
- Added `libmesh_assert_valid_point_locator()` method to verify
  `PointLocator` consistency when debugging with potentially-changed
  meshes
- Update citations
- Add mesh flag allowing Node/Elem unique_id overlap
- Remove bad pointer math fixing vertex average side normal for tet4
- Update TypeVector math for MetaPhysicL 2.0
- Make `solve_for_unconstrained_dofs()` public
- Warn when user attempts to use absolute step tolerance with PETSc
- Bug fixes:
  - The VariationalSmoother is now calculating target elements
    properly; this gives better-smoothed results for meshes with
    triangle, prism, and pyramid elements.
  - libMesh no longer triggers deprecation warnings with PETSc 3.24
    and newer versions
  - libMesh no longer triggers compiler warnings from NVidia HPC SDK
    compilers
  - Add ExodusII::set_max_name_length() to reduce truncation of long
    identifier strings in ExodusII files
  - Fix compatibility with AddressSanitizer flags
  - Fix mesh stitching with NodeElem surface
  - In exodus reader, if mesh is renumbered, don't load wrong solution vector data

## PETSc-level Changes

- PETSc was updated to v3.24.2

## Bug Fixes, Minor Changes, and Minor Enhancements

- Several controls that were unable to recover properly when set to execute on `TIMESTEP_END` have been fixed.
- The `simulation_time_interval` output parameter, which was not functioning, has been removed. The `min_simulation_time_interval`
  should be used instead.
- The distributed rectilinear mesh generator now only offers `edge`, `quad`, and `hex` element types, which
  were the only element types supported. Other element types can still be generated by conversion.
- The [SolutionUserObject.md] now caches retrieval calls at a given location, to prevent scaling with the square
  of the number of variables.
- The `Makefile` system in MOOSE now allows for linking additional objects directly to the executable using the `ADDITIONAL_EXEC_OBJECTS`
  variable.
- PETSc SNES options are no longer added by default when using the linear finite volume discretization, which does not use the nonlinear
  SNES solver.
- Material property output for vector material properties (such as `std::vector<T>`) can now support vectors of more than 10 components.
- The [BDF2.md] time integrator was expanded to support linear finite volume equations.


## Conda Package Changes
