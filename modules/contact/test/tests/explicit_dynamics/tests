[Tests]
  issues = '#25666 #28008 #29732'
  design = 'ExplicitDynamicsContactConstraint.md'
  [block_penalty]
    type = 'CSVDiff'
    input = 'first_test.i'
    csvdiff = 'first_test_out.csv'
    abs_zero = 1.0e-4
    rel_err = 5.0e-5
    allow_warnings = true
    requirement = 'The system shall be able to solve a simple few-element normal contact problem '
                  'using explicit dynamics.'
  []
  [test_balance]
    type = 'Exodiff'
    input = 'test_balance.i'
    exodiff = 'test_balance_out.e'
    abs_zero = 1.0e-4
    allow_warnings = true
    capabilities = 'method!=dbg'
    restep = false # ExplicitMixedOrder cannot handle repeating a timestep
    requirement = 'The system shall be able to solve a simple few-element normal contact problem '
                  'using explicit dynamics solving uncoupled, local equations of momentum balance.'
  []
  [test_balance_short]
    type = 'Exodiff'
    input = 'test_balance.i'
    exodiff = 'test_balance_short_out.e'
    abs_zero = 1.0e-4
    allow_warnings = true
    cli_args = 'Outputs/file_base=test_balance_short_out Executioner/end_time=0.001'
    restep = false # ExplicitMixedOrder cannot handle repeating a timestep
    requirement = 'The system shall be able to solve a simple few-element normal contact problem '
                  'using explicit dynamics solving uncoupled, local equations of momentum balance in debug mode.'
  []
  [settlement]
    type = 'CSVDiff'
    input = 'settlement.i'
    csvdiff = 'settlement_out.csv'
    abs_zero = 1.0e-4
    allow_warnings = true
    requirement = 'The system shall be able to solve a simple few-element normal contact problem '
                  'using explicit dynamics solving uncoupled, local equations of momentum balance '
                  'during an impact-settling under gravity acceleration.'
    heavy = true
  []
  [highvel]
    type = 'CSVDiff'
    input = 'highvel.i'
    csvdiff = 'highvel_out.csv'
    abs_zero = 1.0e-5
    allow_warnings = true
    requirement = 'The system shall be able to solve a simple few-element normal contact problem with contact at an elevated velocity '
                  'using explicit dynamics solving uncoupled, local equations of momentum balance '
                  'during an impact-settling under increased gravity acceleration.'
    heavy = true
  []
  [exp_constant_mass]
    type = 'Exodiff'
    input = 'test_balance.i'
    exodiff = 'test_balance_out.e'
    abs_zero = 1.0e-4
    allow_warnings = true
    capabilities = 'method!=dbg'
    prereq = 'test_balance'
    cli_args ='Executioner/TimeIntegrator/use_constant_mass=true Mesh/patch_update_strategy=always'
    restep = false # ExplicitMixedOrder cannot handle repeating a timestep
    requirement = 'The system shall be able to solve an explicit contact problem with the constant mass option and with updating the contact patch often.'
  []
  [optimized_contact]
    type = 'Exodiff'
    custom_cmp = 'optimize.cmp'
    input = 'test_balance_optimized.i'
    exodiff = 'test_balance_out.e'
    # uses same output name
    prereq = 'exp_constant_mass'
    abs_zero = 1.0e-4
    allow_warnings = true
    capabilities = 'method!=dbg'
    restep = false # ExplicitMixedOrder cannot handle repeating a timestep
    requirement = 'The system shall be able to solve an explicit contact problem quickly, omitting verbose output.'
  []
  [deep_impact]
    type = 'Exodiff'
    input = 'deep_impact.i'
    exodiff = 'deep_impact_out.e'
    abs_zero = 1.0e-5
    allow_warnings = true
    capabilities = 'method!=dbg'
    heavy = true
    requirement = 'The system shall be able to solve for a large displacemnt explicit contact problem.'
  []
  [block_restricted]
    type = 'Exodiff'
    input = 'block_restricted.i'
    exodiff = 'block_restricted_out.e'
    allow_warnings = true
    restep = false # ExplicitMixedOrder cannot handle repeating a timestep
    issues = '#32054'
    design = 'ExplicitDynamicsContactAction.md'
    requirement = 'The contact system when used with explicit time stepping shall be able to be block restricted to subdomains that are involved in the contact.'
  []
  [moving_block_failure]
    type = 'RunException'
    input = 'moving_block.i'
    expect_err = 'negative Jacobian'
    allow_warnings = true
    cli_args = 'Executioner/TimeIntegrator/restrict_to_active_blocks=false'
    restep = false # ExplicitMixedOrder cannot handle repeating a timestep
    requirement = 'The contact system shall produce an error if it detects an inverted element.'
    issues = '#32066'
  []
  [moving_block_success]
    type = 'Exodiff'
    input = 'moving_block.i'
    exodiff = 'moving_block_out.e'
    allow_warnings = true
    restep = false # ExplicitMixedOrder cannot handle repeating a timestep
    requirement = 'Explicit dynamics along with contact shall be able to handle inverted elements '
                  'if no variables are defined on those elements.'
    issues = '#32066'
  []
  [moving_block_refine1]
    type = 'Exodiff'
    input = 'moving_block_refine1.i'
    exodiff = 'moving_block_refine1_out.e moving_block_refine1_out.e-s002'
    allow_warnings = true
    max_parallel = 2
    restep = false # ExplicitMixedOrder cannot handle repeating a timestep
    requirement = 'In explicit dynamical problems, it shall be possible to perform no calculations '
                  'on mesh blocks upon which no variables are defined, including the cases where '
                  'mesh adaptivity is used.'
    design = 'ExplicitDynamicsContactConstraint.md ExplicitMixedOrder.md'
    issues = '#32066'
  []
  [moving_block_refine2]
    type = 'Exodiff'
    input = 'moving_block_refine2.i'
    exodiff = 'moving_block_refine2_out.e moving_block_refine2_out.e-s002 moving_block_refine2_out.e-s003'
    allow_warnings = true
    heavy = true
    max_parallel = 2
    restep = false # ExplicitMixedOrder cannot handle repeating a timestep
    requirement = 'In explicit dynamical problems, it shall be possible to perform no calculations '
                  'on mesh blocks upon which no variables are defined, including the cases where '
                  'initial mesh adaptivity and/or marker-defined adaptivity are used.'
    design = 'ExplicitDynamicsContactConstraint.md ExplicitMixedOrder.md'
    issues = '#32066'
  []
[]
